<html>
<head>
<title>merc extreme</title>

<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r66/three.min.js"></script>

<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />

<!--<script src="lib/three.js"></script>-->
<script src="lib/jquery-latest.min.js"></script>
<script src="lib/jquery-ui-1.10.4.custom.min.js"></script>
<script src="lib/underscore.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js"></script>
<script src="merc-extreme.js"></script>
<script src="geodesy.js"></script>
<script src="coords-db.js"></script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script>

$(document).ready(init);

</script>

</head>
<body>

<style>

body {
  margin: 0;
  height: 100%;
  font-family: sans-serif;
}

#titlebar {
  background: #222;
}

</style>

<div id="titlebar" style="color: white; padding: 5px;">
  MERCATOR: EXTREME by Drew Roos
  <div style="float: right;">
    <input id="locsearch"></input>
    <button id="search">Go</button>
    <div style="display: inline-block;">Layers</div>
    <div id="companion" style="display: inline-block;">Companion Map</div>
    <div style="display: inline-block;">Places</div>
    <div style="display: inline-block;">Routes</div>
    <div style="display: inline-block;">Settings</div>
    <div style="display: inline-block;">Help</div>
  </div>
  <div style="clear: both;"></div>
</div>

<div id="container" style="position: relative;">

<script type="text/html" id="layer-edit">
  <div data-bind="with: layer">
    url template <input data-bind="value: url"></input><br>
    name (opt) <input data-bind="value: name"></input><br>
    max depth (opt) <input data-bind="value: max_depth"></input><br>
    <div id="tile_preview">
      <div data-bind="if: preview_status() == 'loading'">loading...</div>
      <div data-bind="if: preview_status() == 'error'">could not load tile</div>
      <div data-bind="if: preview_status() == 'success'">
        <img data-bind="attr: {src: preview_url}" />
      </div>
    </div>
  </div>
  <button data-bind="click: commit, text: commitCaption"></button>
  <button data-bind="click: cancel">cancel</button>
</script>

<div id="layers" style="text-align: right; background: rgba(255, 255, 255, .4); position: absolute; right: 10px; top: 10px;">
  <div data-bind="foreach: layers">
    <div>
      <span data-bind="text: displayName, click: $parent.selectLayer, style: { color: active() ? '#400' : 'black' }"></span>
      <span data-bind="if: custom() && !pending(), click: edit">(edit)</span>
      <span data-bind="if: custom, click: $parent.removeLayer">(remove)</span>
      <div data-bind="template: {name: 'layer-edit', data: editContext, if: pending}"></div>
    </div>
  </div>
  <div data-bind="if: !pendingLayer(), click: newPendingLayer">new layer</div>
  <div data-bind="template: {name: 'layer-edit', data: editContext, if: pendingLayer}">
  </div>
<hr>
  <div data-bind="foreach: places">
    <div data-bind="text: name, click: select"></div>
  </div>
<hr>
<div id="settings">
  Zoom level blend
  <div id="blend"></div>
  Overzoom
  <div id="overzoom"></div>
  Units: <span data-bind="foreach: units"> <span data-bind="text: $data, click: $parent.setUnit, style: { color: $parent.active_unit() == $data ? '#400' : 'black' }"></span></span>
</div>
</div>

<div id="attribution" style="position: absolute; left: 0; right: 0; bottom: 0; text-align: center;"><span style="background: rgba(255, 255, 255, .4); display: inline-block; border-radius: 5px 5px 0 0;" data-bind="html: curAttr"></span></div>
<div id="poleinfo" style="text-align: right; background: rgba(255, 255, 255, .4); position: absolute; right: 0; bottom: 0; border-radius: 5px 0 0 0;">
  POLE<br><span class="swap">&harr;</span><span class="data"></span>
</div>
<div id="antipoleinfo" style="background: rgba(255, 255, 255, .4); position: absolute; left: 0; bottom: 0; border-radius: 0 5px 0 0;">
  ANTI-POLE<br><span class="data"></span><span class="swap">&harr;</span>
</div>
<div id="mouseinfo" style="background: rgba(255, 255, 255, .4); position: absolute; left: 10px; top: 10px;">
  MOUSEPOS
  <div>
    <div id="pos"></div>
    <div id="dist"></div>
    <div id="bearing"></div>
    <div id="orient"><span style="display: inline-block;">&uarr;</span></div>
    <div id="scale"><span id="label"></span><div id="bar" style="height: 6px; background: rgba(0, 0, 0, .6);"></div></div>
  </div>
</div>

</div>

</body>
</html>
